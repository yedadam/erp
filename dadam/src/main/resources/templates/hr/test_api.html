<!DOCTYPE html>
<html>
<head>
    <title>ERP API í…ŒìŠ¤íŠ¸</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .test-result { margin: 10px 0; padding: 10px; background: #f5f5f5; border-radius: 3px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        button { padding: 8px 15px; margin: 5px; cursor: pointer; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ERP ê¸‰ì—¬í•­ëª© ì¹´í…Œê³ ë¦¬ 7ê°€ì§€ + ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© ì—°ë™ í…ŒìŠ¤íŠ¸</h1>

    <div class="test-section">
        <h3>1. ê¸‰ì—¬í•­ëª© ì¹´í…Œê³ ë¦¬ 7ê°€ì§€ í™•ì¸</h3>
        <p>ê¸‰ì—¬í•­ëª© ê´€ë¦¬ í™”ë©´ì—ì„œ ì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´ì— ë‹¤ìŒ 7ê°€ì§€ê°€ ëª¨ë‘ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸:</p>
        <ul>
            <li>ê¸°ë³¸ê¸‰</li>
            <li>ìˆ˜ë‹¹</li>
            <li>ë³µë¦¬í›„ìƒ</li>
            <li>ìƒì—¬</li>
            <li>ê³µì œ</li>
            <li>ë¹„ê³¼ì„¸</li>
            <li>ê¸°íƒ€</li>
        </ul>
        <button onclick="testSalaryItemCategories()">ê¸‰ì—¬í•­ëª© ì¹´í…Œê³ ë¦¬ í…ŒìŠ¤íŠ¸</button>
        <div id="categoryTestResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h3>2. ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© API í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testEmpAllowances()">ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© ì¡°íšŒ í…ŒìŠ¤íŠ¸</button>
        <button onclick="testInsertEmpAllowance()">ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© ë“±ë¡ í…ŒìŠ¤íŠ¸</button>
        <div id="empAllowanceTestResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h3>3. ê¸‰ì—¬ëª…ì„¸ì„œ ì—°ë™ í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testSalaryStatement()">ê¸‰ì—¬ëª…ì„¸ì„œ ì¡°íšŒ í…ŒìŠ¤íŠ¸</button>
        <div id="salaryStatementTestResult" class="test-result"></div>
    </div>

    <div class="test-section">
        <h3>4. ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</h3>
        <button onclick="runAllTests()">ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="allTestsResult" class="test-result"></div>
    </div>

    <script>
        const BASE_URL = 'http://localhost:8080';

        function showResult(elementId, message, isSuccess = true) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<pre>${message}</pre>`;
            element.className = `test-result ${isSuccess ? 'success' : 'error'}`;
        }

        async function testSalaryItemCategories() {
            try {
                const response = await fetch(`${BASE_URL}/erp/hr/salaryitem`);
                if (response.ok) {
                    showResult('categoryTestResult', 
                        'âœ… ê¸‰ì—¬í•­ëª© ê´€ë¦¬ í™”ë©´ ì ‘ì† ì„±ê³µ\n' +
                        'í™”ë©´ì—ì„œ ì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´ì— 7ê°€ì§€ ì˜µì…˜ì´ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:\n' +
                        '- ê¸°ë³¸ê¸‰, ìˆ˜ë‹¹, ë³µë¦¬í›„ìƒ, ìƒì—¬, ê³µì œ, ë¹„ê³¼ì„¸, ê¸°íƒ€');
                } else {
                    showResult('categoryTestResult', 
                        'âŒ ê¸‰ì—¬í•­ëª© ê´€ë¦¬ í™”ë©´ ì ‘ì† ì‹¤íŒ¨', false);
                }
            } catch (error) {
                showResult('categoryTestResult', 
                    `âŒ ì˜¤ë¥˜: ${error.message}`, false);
            }
        }

        async function testEmpAllowances() {
            try {
                const response = await fetch(`${BASE_URL}/erp/hr/empAllowances?empId=e1001&comId=com-101`);
                const data = await response.json();
                showResult('empAllowanceTestResult', 
                    'âœ… ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© ì¡°íšŒ ì„±ê³µ\n' +
                    `ì¡°íšŒëœ ë°ì´í„°: ${JSON.stringify(data, null, 2)}`);
            } catch (error) {
                showResult('empAllowanceTestResult', 
                    `âŒ ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© ì¡°íšŒ ì‹¤íŒ¨: ${error.message}`, false);
            }
        }

        async function testInsertEmpAllowance() {
            try {
                const testData = {
                    empId: 'e1001',
                    comId: 'com-101',
                    allowCode: 'TEST_ALLOW',
                    amount: 50000,
                    note: 'í…ŒìŠ¤íŠ¸ ê¸‰ì—¬í•­ëª©'
                };

                const response = await fetch(`${BASE_URL}/erp/hr/insertEmpAllowance`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(testData)
                });

                const result = await response.text();
                showResult('empAllowanceTestResult', 
                    `âœ… ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© ë“±ë¡ í…ŒìŠ¤íŠ¸ ì™„ë£Œ\nê²°ê³¼: ${result}`);
            } catch (error) {
                showResult('empAllowanceTestResult', 
                    `âŒ ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© ë“±ë¡ ì‹¤íŒ¨: ${error.message}`, false);
            }
        }

        async function testSalaryStatement() {
            try {
                const response = await fetch(`${BASE_URL}/erp/hr/salary/list-data?comId=com-101`);
                const data = await response.json();
                showResult('salaryStatementTestResult', 
                    'âœ… ê¸‰ì—¬ëª…ì„¸ì„œ ì¡°íšŒ ì„±ê³µ\n' +
                    `ì¡°íšŒëœ ê±´ìˆ˜: ${data.length}ê±´`);
            } catch (error) {
                showResult('salaryStatementTestResult', 
                    `âŒ ê¸‰ì—¬ëª…ì„¸ì„œ ì¡°íšŒ ì‹¤íŒ¨: ${error.message}`, false);
            }
        }

        async function runAllTests() {
            const results = [];
            
            // í…ŒìŠ¤íŠ¸ 1: ê¸‰ì—¬í•­ëª© ì¹´í…Œê³ ë¦¬
            try {
                const response1 = await fetch(`${BASE_URL}/erp/hr/salaryitem`);
                results.push('âœ… ê¸‰ì—¬í•­ëª© ì¹´í…Œê³ ë¦¬ í…ŒìŠ¤íŠ¸: ì„±ê³µ');
            } catch (error) {
                results.push(`âŒ ê¸‰ì—¬í•­ëª© ì¹´í…Œê³ ë¦¬ í…ŒìŠ¤íŠ¸: ì‹¤íŒ¨ - ${error.message}`);
            }

            // í…ŒìŠ¤íŠ¸ 2: ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª©
            try {
                const response2 = await fetch(`${BASE_URL}/erp/hr/empAllowances?empId=e1001&comId=com-101`);
                results.push('âœ… ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© í…ŒìŠ¤íŠ¸: ì„±ê³µ');
            } catch (error) {
                results.push(`âŒ ì‚¬ì›ë³„ ê¸‰ì—¬í•­ëª© í…ŒìŠ¤íŠ¸: ì‹¤íŒ¨ - ${error.message}`);
            }

            // í…ŒìŠ¤íŠ¸ 3: ê¸‰ì—¬ëª…ì„¸ì„œ
            try {
                const response3 = await fetch(`${BASE_URL}/erp/hr/salary/list-data?comId=com-101`);
                results.push('âœ… ê¸‰ì—¬ëª…ì„¸ì„œ í…ŒìŠ¤íŠ¸: ì„±ê³µ');
            } catch (error) {
                results.push(`âŒ ê¸‰ì—¬ëª…ì„¸ì„œ í…ŒìŠ¤íŠ¸: ì‹¤íŒ¨ - ${error.message}`);
            }

            showResult('allTestsResult', 
                'ğŸ“‹ ì „ì²´ í…ŒìŠ¤íŠ¸ ê²°ê³¼:\n' + results.join('\n'));
        }
    </script>
</body>
</html> 