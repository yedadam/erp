-- EMP_ALLOWANCE 테이블 생성 (사원별 급여항목 관리)
CREATE TABLE EMP_ALLOWANCE (
    EMP_ID VARCHAR2(20) NOT NULL,
    COM_ID VARCHAR2(20) NOT NULL,
    ALLOW_CODE VARCHAR2(20) NOT NULL,
    AMOUNT NUMBER(10,2) DEFAULT 0,
    CREATED_DATE DATE DEFAULT SYSDATE,
    UPDATED_DATE DATE DEFAULT SYSDATE,
    NOTE VARCHAR2(200),
    PRIMARY KEY (EMP_ID, COM_ID, ALLOW_CODE)
);

-- 인덱스 생성
CREATE INDEX IDX_EMP_ALLOWANCE_EMP ON EMP_ALLOWANCE(EMP_ID, COM_ID);
CREATE INDEX IDX_EMP_ALLOWANCE_CODE ON EMP_ALLOWANCE(ALLOW_CODE);

-- 샘플 데이터 삽입 (식대, 교통비 등)
INSERT INTO EMP_ALLOWANCE (EMP_ID, COM_ID, ALLOW_CODE, AMOUNT, NOTE) VALUES
('e1001', 'com-101', 'MEAL', 200000, '식대 지원'),
('e1001', 'com-101', 'TRANSPORT', 100000, '교통비 지원'),
('e1002', 'com-101', 'MEAL', 200000, '식대 지원'),
('e1002', 'com-101', 'TRANSPORT', 100000, '교통비 지원'),
('e1003', 'com-101', 'MEAL', 200000, '식대 지원'),
('e1003', 'com-101', 'TRANSPORT', 100000, '교통비 지원'),
('e1004', 'com-101', 'MEAL', 200000, '식대 지원'),
('e1004', 'com-101', 'TRANSPORT', 100000, '교통비 지원'),
('e1005', 'com-101', 'MEAL', 200000, '식대 지원'),
('e1005', 'com-101', 'TRANSPORT', 100000, '교통비 지원');

COMMIT;

-- 테이블 생성 확인
SELECT * FROM EMP_ALLOWANCE WHERE COM_ID = 'com-101' ORDER BY EMP_ID, ALLOW_CODE; 